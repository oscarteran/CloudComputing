resources:
- name: my-bigquery-dataset
  type: gcp-types/bigquery-v2:datasets
  properties:
    # datasetReference:
    #   datasetId: my_dataset
    location: US
    access:
    - role: READER
      specialGroup: projectReaders
    - role: WRITER
      specialGroup: projectWriters
    - role: OWNER
      specialGroup: projectOwners

- name: my-bigquery-table
  type: gcp-types/bigquery-v2:tables
  properties:
    datasetId: $(ref.my-bigquery-dataset.datasetId)
    tableReference:
      tableId: my_table
    schema:
      fields:
      - name: id
        type: STRING
        mode: REQUIRED
      - name: name
        type: STRING
        mode: NULLABLE
      - name: age
        type: INTEGER
        mode: NULLABLE
